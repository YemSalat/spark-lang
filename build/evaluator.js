!function t(e,n,r){function o(i,u){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!u&&c)return c(i,!0);if(a)return a(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var s=n[i]={exports:{}};e[i][0].call(s.exports,function(t){var n=e[i][1][t];return o(n?n:t)},s,s.exports,t,e,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(t,e,n){e.exports=function(){"use strict";function e(t,e,n){this.name=t,this.message=e,this.location=n}var n=t("./modules/SymbolTable"),r=t("./modules/FuncTable"),o=t("./modules/ErrorManager"),a=t("./modules/EvaluatorUtil"),i=t("./modules/DEFAULT_CONSTANTS");n.setInitialScope(i);var u=function(t,n){var r=n||t.$$,o=l[r](t);if(o.error)throw new e("SemanticError",o.error.message,o.error.location);return o},c={parse:function(t,e){n.reset(),r.reset();var o=u(t);return{tree:o,symbolScope:n.getTable(),funcScope:r.getTable()}}},l={DOCSTRING:function(t){return t},VARIABLE_STATEMENT:function(t){for(var e=t.type,r=0,i=t.declarations.length;i>r;r++){var c=t.declarations[r],l=null;if(null!==c.init){c.init=u(c.init);var s=a.typeCheck(t.type,c.init.type);if(!s)return o.logError(t,t.location,"type_mismatch",[c.id.name,e]);t.type=s,l=s}c.type=l;var p=c.id.name,f=n.checkScope(p);if(f)return o.logError(t,t.location,"already_exists",[c.id.name,f.value,f.initLine]);n.addSymbol(c,{value:null,type:t.type})}return t},VARIABLE_DECLARATOR:function(t){return t},FUNCTION_DECLARATION:function(t){var e=r.findFunc(t);if(e)return o.logError(t,t.location,"already_exists",[e.name,e.initLine]);var i=a.checkParamDuplicates(t.params);return i?o.logError(i,i.location,"duplicate_param",[i.id.name]):(r.addFunc(t),n.enterScope(),r.enterFunc(t),t.body=u(t.body),r.exitFunc(),n.exitScope(),t)},PARAM_DECLARATOR:function(t){return t},RETURN_STATEMENT:function(t){t.argument=u(t.argument),t.type=t.argument.type;var e=getCurrentFunc();if(!e.node)return o.logError(t,t.location,"return_outside");var n=a.typeCheck(t.type,e.type);return n?t:o.logError(t,t.location,"type_mismatch",[e.node.id.name])},CALL_STATEMENT:function(t){return t.type="int",t},FOR_STATEMENT:function(t){return t},FOR_STATEMENT_DECLARATION:function(t){return t},BREAK_STATEMENT:function(t){return t},CONTINUE_STATEMENT:function(t){return t},EXPRESSION_STATEMENT:function(t){var e=u(t.expression);return e},IDENTIFIER:function(t){var e=t.name,r=n.findSymbol(e);return r?(t.type=r.type,t):o.logError(t,t.location,"does_not_exist",[e])},LITERAL:function(t){return"int"===t.type&&(t.type=a.getIntegerType(t.value)),t},BINARY_EXPRESSION:function(t){return t.left=u(t.left),t.right=u(t.right),t.type=a.typeCheck(t.left.type,t.right.type),t.type?t:o.logError(t,t.location,"type_mismatch",[t.operator,t.left.type,t.right.type])},ASSIGNMENT_STATEMENT:function(t){t.right=u(t.right);var e=t.left.name,r=n.findSymbol(e);if(!r)return u(a.constructVarDeclarator(t));t.left=u(t.left);var i=a.typeCheck(t.left.type,t.right.type);return i?t:o.logError(t,t.location,"type_mismatch",[t.right.type,t.left.type])},BLOCK_STATEMENT:function(t){return n.enterScope(),t.body.forEach(function(t){t=u(t)}),n.exitScope(),t},PROGRAM:function(t){return t.body.forEach(function(t){t=u(t)}),t},IF_STATEMENT:function(t){return t.test=u(t.test),"bool"!==t.test.type?o.logError(t,t.test.location,"not_a_bool"):(t.consequent=u(t.consequent),t.alternate&&(t.alternate=u(t.alternate)),t)},LOGICAL_EXPRESSION:function(t){t.left=u(t.left),t.right=u(t.right);var e=a.typeCheck(t.left.type,t.right.type);return e?a.isEqualityOperator(t.operator)||a.isNumber(e)?t:o.logError(t,t.location,"not_a_number",[t.operator]):o.logError(t,t.location,"type_mismatch",[t.left.type,t.right.type])},UPDATE_EXPRESSION:function(t){return t.argument=u(t.argument),a.isNumber(t.argument.type)?(t.type=t.argument.type,t):o.logError(t,t.location,"not_a_number")},UNARY_EXPRESSION:function(t){t.argument=u(t.argument);var e=a.typeCheck(t.argument.type);return"bool"!==e?o.logError(t,t.location,"not_a_bool"):t}};return c}()},{"./modules/DEFAULT_CONSTANTS":2,"./modules/ErrorManager":3,"./modules/EvaluatorUtil":4,"./modules/FuncTable":5,"./modules/SymbolTable":6}],2:[function(t,e,n){e.exports=function(){"use strict";var t={LOW:{name:"LOW",type:"int",value:0},HIGH:{name:"HIGH",type:"int",value:1},READ:{name:"READ",type:"int",value:0},WRITE:{name:"WRITE",type:"int",value:1}};return t}()},{}],3:[function(t,e,n){e.exports=function(){"use strict";var t={operator:{"+":"add","-":"subtract","*":"multiply","/":"divide"}},e={VARIABLE_STATEMENT:{type_mismatch:'variable "{0}" does not match type "{1}"',already_exists:'variable "{0}" was already initialized as {1} on line {2}',does_not_exist:'variable "{0}" is not defined'},VARIABLE_DECLARATOR:{already_initialized:'variable "{0}" was already initialized as {1} on line {2}',already_declared:'variable "{0}" was already declared on line {1}'},FUNCTION_DECLARATION:{already_exists:'function "{0}" was already declared on line {1}'},PARAM_DECLARATOR:{duplicate_param:'duplicate parameter "{0}"'},RETURN_STATEMENT:{return_outside:"return statement outside function declaration",type_mismatch:'return statement type does not match function "{0}"'},IDENTIFIER:{does_not_exist:'variable "{0}" does not exist'},BINARY_EXPRESSION:{type_mismatch:'"{0}" operation types do not match, can\'t {operator: 0} "{1}" and "{2}"'},LOGICAL_EXPRESSION:{type_mismatch:'can\'t compare "{0}" and "{1}"',cant_compare:'can\'t compare "{0}" and "{1}"',not_a_number:'can use "{0}" operator only on numbers'},ASSIGNMENT_STATEMENT:{type_mismatch:'assignment types mismatch, can\'t assign "{0}" to "{1}"'},UPDATE_EXPRESSION:{not_a_number:"expression is not a number"},UNARY_EXPRESSION:{not_a_bool:"unary expression must be a boolean"},IF_STATEMENT:{not_a_bool:"IF condition must be a boolean"}},n=function(n,r,o,a){var i="string"==typeof n?n:n.$$,u=e[i][o];if(a)for(var c=0,l=a.length;l>c;c++){var s=(a[c],new RegExp("\\{[ ]*([a-z]+)[ ]*\\:[ ]*"+c+"[ ]*\\}","gi")),p=new RegExp("\\{[ ]*"+c+"[ ]*\\}","gi");u=u.replace(s,function(e,n){var r=t[n];return console.log(">woo>"),console.log(e,n),r[a[c]]}),u=u.replace(p,a[c])}var f={error:{location:r,message:u,node:n}};return console.log(f.location),console.log(f.message),f},r={logError:n};return r}()},{}],4:[function(t,e,n){e.exports=function(){"use strict";var t=["byte","int","long","float"],e=["==","!=","is","is not"],n={"byte":128,"int":32767,"long":2147483647},r={constructVarDeclarator:function(t){return t.$$="VARIABLE_STATEMENT",t.type=t.right.type,t.declarations=[{$$:"VARIABLE_DECLARATOR",id:{location:t.left.location,$$:"IDENTIFIER",name:t.left.name},location:t.left.location,init:t.right}],t},typeCheck:function(e,n){if(!e||!n)return!1;if(e===n)return e;var r=t.indexOf(e);if(r>-1){var o=t.indexOf(n);return o>-1?(o>r&&(e=n),e):!1}return!1},getParameters:function(t){},checkParamDuplicates:function(t){for(var e=1,n=t.length;n>e;e++)for(var r=t[e],o=0;e>o;o++){var a=t[o];if(a.id.name===r.id.name)return r}return!1},isNumber:function(e){return t.indexOf(e)>-1},isEqualityOperator:function(t){return e.indexOf(t)>-1},getIntegerType:function(t){var e=parseInt(t,10),r=Math.abs(e),o="int",a=n["long"];for(var i in n)if(n.hasOwnProperty(i)){var u=n[i];u>=r&&a>=u&&(o=i,a=u)}return o}};return r}()},{}],5:[function(t,e,n){e.exports=function(){"use strict";var t={},e={node:null,returns:[]},n={getTable:function(){return t},reset:function(){t={},e={node:null,returns:[]}},getCurrentFunc:function(){return e},enterFunc:function(t){e.node=t},exitFunc:function(){e={node:null,returns:[]}},funcAddReturn:function(t){current.returns.push(t)},getSignature:function(t){for(var e=t.type+"__"+t.id.name+"__",n=0,r=t.params.length;r>n;n++)e+=t.params[n].type+"_";return e+="fn"},getParams:function(t){for(var e=[],n=0,r=t.length;r>n;n++){var o=t[n];e.push({type:o.type,name:o.id.name})}return e},findFunc:function(e){var r=n.getSignature(e);return t.hasOwnProperty(r)?t[r]:null},addFunc:function(e){var r=n.getSignature(e),o=e.id.name,a=e.type,i=n.getParams(e.params),u=e.location.start.line,c=e.doc?e.doc.body:"";t[r]={name:o,type:a,params:i,initLine:u,doc:c}}};return n}()},{}],6:[function(t,e,n){e.exports=function(){"use strict";var t={},e=1,n={sc0:t,sc1:{}},r=n["sc"+e],o={setInitialScope:function(e){t=e,o.reset()},getTable:function(){return n},reset:function(){e=1,n={sc0:t,sc1:{}},r=n["sc"+e]},enterScope:function(){e+=1,n["sc"+e]={},r=n["sc"+e]},exitScope:function(){e>1&&(n["sc"+e]=null),e-=1,r=n["sc"+e]},getScope:function(t){var r=t||e;return n["sc"+r]},findSymbol:function(t){for(var n=e;n>=0;n--){var r=o.getScope(n);if(r.hasOwnProperty(t))return r[t]}return null},addSymbol:function(t,e){var n=e||t.init,o=t.id.name,a=n.value,i=n.type,u=t.location.start.line;r[o]={name:o,value:a,type:i,initLine:u}},checkScope:function(t){return r.hasOwnProperty(t)?r[t]:!1}};return o}()},{}]},{},[1]);
//# sourceMappingURL=maps/evaluator.js.map
