!function e(t,n,r){function o(i,u){if(!n[i]){if(!t[i]){var c="function"==typeof require&&require;if(!u&&c)return c(i,!0);if(a)return a(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var s=n[i]={exports:{}};t[i][0].call(s.exports,function(e){var n=t[i][1][e];return o(n?n:e)},s,s.exports,e,t,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){(function(n){t.exports=function(){"use strict";function t(e,t,n){this.name=e,this.message=t,this.location=n}var r=e("./modules/SymbolTable"),o=e("./modules/FuncTable"),a=e("./modules/ErrorManager"),i=e("./modules/EvaluatorUtil"),u=(e("./../modules/DEFAULT_CONSTANTS"),function(e,n){var r=n||e.$$,o=l[r](e);if(o.error)throw new t("SemanticError",o.error.message,o.error.location);return o}),c={parse:function(e,t){r.reset(),o.reset();var n=u(e);return console.log("symbolTable.getTable()"),console.log(r.getTable()),{tree:n,symbolScope:r.getTable(),funcScope:o.getTable()}}},l={DOCSTRING:function(e){return e},VARIABLE_STATEMENT:function(e){for(var t=e.type,n=0,o=e.declarations.length;o>n;n++){var c=e.declarations[n],l=null;if(null!==c.init){c.init=u(c.init);var s=i.typeCheck(e.type,c.init.type);if(!s)return a.logError(e,e.location,"type_mismatch",[c.id.name,t]);e.type=s,l=s}c.type=l;var f=c.id.name,p=r.checkScope(f);if(p)return a.logError(e,e.location,"already_exists",[c.id.name,p.value,p.initLine]);r.addSymbol(c,{value:null,type:e.type})}return e},VARIABLE_DECLARATOR:function(e){return e},FUNCTION_DECLARATION:function(e){var t=o.findFunc(e);if(t)return a.logError(e,e.location,"already_exists",[t.name,t.initLine]);var n=i.checkParamDuplicates(e.params);return n?a.logError(n,n.location,"duplicate_param",[n.id.name]):(o.addFunc(e),r.enterScope(),o.enterFunc(e),e.body=u(e.body),o.exitFunc(),r.exitScope(),e)},PARAM_DECLARATOR:function(e){return e},RETURN_STATEMENT:function(e){e.argument=u(e.argument),e.type=e.argument.type;var t=getCurrentFunc();if(!t.node)return a.logError(e,e.location,"return_outside");var n=i.typeCheck(e.type,t.type);return n?e:a.logError(e,e.location,"type_mismatch",[t.node.id.name])},CALL_STATEMENT:function(e){return e.type="int",e},FOR_STATEMENT:function(e){return e},FOR_STATEMENT_DECLARATION:function(e){return e},BREAK_STATEMENT:function(e){return e},CONTINUE_STATEMENT:function(e){return e},EXPRESSION_STATEMENT:function(e){var t=u(e.expression);return t},IDENTIFIER:function(e){var t=e.name,n=r.findSymbol(t);return n?(e.type=n.type,e):a.logError(e,e.location,"does_not_exist",[t])},LITERAL:function(e){return"int"===e.type&&(e.type=i.getIntegerType(e.value)),e},BINARY_EXPRESSION:function(e){return e.left=u(e.left),e.right=u(e.right),e.type=i.typeCheck(e.left.type,e.right.type),e.type?e:a.logError(e,e.location,"type_mismatch",[e.operator,e.left.type,e.right.type])},ASSIGNMENT_STATEMENT:function(e){e.right=u(e.right);var t=e.left.name,n=r.findSymbol(t);if(!n)return u(i.constructVarDeclarator(e));e.left=u(e.left);var o=i.typeCheck(e.left.type,e.right.type);return o?e:a.logError(e,e.location,"type_mismatch",[e.right.type,e.left.type])},BLOCK_STATEMENT:function(e){return r.enterScope(),e.body.forEach(function(e){e=u(e)}),r.exitScope(),e},PROGRAM:function(e){return e.body.forEach(function(e){e=u(e)}),e},IF_STATEMENT:function(e){return e.test=u(e.test),"bool"!==e.test.type?a.logError(e,e.test.location,"not_a_bool"):(e.consequent=u(e.consequent),e.alternate&&(e.alternate=u(e.alternate)),e)},LOGICAL_EXPRESSION:function(e){e.left=u(e.left),e.right=u(e.right);var t=i.typeCheck(e.left.type,e.right.type);return t?i.isEqualityOperator(e.operator)||i.isNumber(t)?e:a.logError(e,e.location,"not_a_number",[e.operator]):a.logError(e,e.location,"type_mismatch",[e.left.type,e.right.type])},UPDATE_EXPRESSION:function(e){return e.argument=u(e.argument),i.isNumber(e.argument.type)?(e.type=e.argument.type,e):a.logError(e,e.location,"not_a_number")},UNARY_EXPRESSION:function(e){e.argument=u(e.argument);var t=i.typeCheck(e.argument.type);return"bool"!==t?a.logError(e,e.location,"not_a_bool"):e}};return n.SparkEvaluator=c,c}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./../modules/DEFAULT_CONSTANTS":6,"./modules/ErrorManager":2,"./modules/EvaluatorUtil":3,"./modules/FuncTable":4,"./modules/SymbolTable":5}],2:[function(e,t,n){t.exports=function(){"use strict";var e={operator:{"+":"add","-":"subtract","*":"multiply","/":"divide"}},t={VARIABLE_STATEMENT:{type_mismatch:'variable "{0}" does not match type "{1}"',already_exists:'variable "{0}" was already initialized as {1} on line {2}',does_not_exist:'variable "{0}" is not defined'},VARIABLE_DECLARATOR:{already_initialized:'variable "{0}" was already initialized as {1} on line {2}',already_declared:'variable "{0}" was already declared on line {1}'},FUNCTION_DECLARATION:{already_exists:'function "{0}" was already declared on line {1}'},PARAM_DECLARATOR:{duplicate_param:'duplicate parameter "{0}"'},RETURN_STATEMENT:{return_outside:"return statement outside function declaration",type_mismatch:'return statement type does not match function "{0}"'},IDENTIFIER:{does_not_exist:'variable "{0}" does not exist'},BINARY_EXPRESSION:{type_mismatch:'"{0}" operation types do not match, can\'t {operator: 0} "{1}" and "{2}"'},LOGICAL_EXPRESSION:{type_mismatch:'can\'t compare "{0}" and "{1}"',cant_compare:'can\'t compare "{0}" and "{1}"',not_a_number:'can use "{0}" operator only on numbers'},ASSIGNMENT_STATEMENT:{type_mismatch:'assignment types mismatch, can\'t assign "{0}" to "{1}"'},UPDATE_EXPRESSION:{not_a_number:"expression is not a number"},UNARY_EXPRESSION:{not_a_bool:"unary expression must be a boolean"},IF_STATEMENT:{not_a_bool:"IF condition must be a boolean"}},n=function(n,r,o,a){var i="string"==typeof n?n:n.$$,u=t[i][o];if(a)for(var c=0,l=a.length;l>c;c++){var s=(a[c],new RegExp("\\{[ ]*([a-z]+)[ ]*\\:[ ]*"+c+"[ ]*\\}","gi")),f=new RegExp("\\{[ ]*"+c+"[ ]*\\}","gi");u=u.replace(s,function(t,n){var r=e[n];return r[a[c]]}),u=u.replace(f,a[c])}var p={error:{location:r,message:u,node:n}};return p},r={logError:n};return r}()},{}],3:[function(e,t,n){t.exports=function(){"use strict";var e=["byte","int","long","float"],t=["==","!=","is","is not"],n={"byte":128,"int":32767,"long":2147483647},r={constructVarDeclarator:function(e){return e.$$="VARIABLE_STATEMENT",e.type=e.right.type,e.declarations=[{$$:"VARIABLE_DECLARATOR",id:{location:e.left.location,$$:"IDENTIFIER",name:e.left.name},location:e.left.location,init:e.right}],e},typeCheck:function(t,n){if(!t||!n)return!1;if(t===n)return t;var r=e.indexOf(t);if(r>-1){var o=e.indexOf(n);return o>-1?(o>r&&(t=n),t):!1}return!1},getParameters:function(e){},checkParamDuplicates:function(e){for(var t=1,n=e.length;n>t;t++)for(var r=e[t],o=0;t>o;o++){var a=e[o];if(a.id.name===r.id.name)return r}return!1},isNumber:function(t){return e.indexOf(t)>-1},isEqualityOperator:function(e){return t.indexOf(e)>-1},getIntegerType:function(e){var t=parseInt(e,10),r=Math.abs(t),o="int",a=n["long"];for(var i in n)if(n.hasOwnProperty(i)){var u=n[i];u>=r&&a>=u&&(o=i,a=u)}return o}};return r}()},{}],4:[function(e,t,n){t.exports=function(){"use strict";var e={},t={node:null,returns:[]},n={getTable:function(){return e},reset:function(){e={},t={node:null,returns:[]}},getCurrentFunc:function(){return t},enterFunc:function(e){t.node=e},exitFunc:function(){t={node:null,returns:[]}},funcAddReturn:function(e){current.returns.push(e)},getSignature:function(e){for(var t=e.type+"__"+e.id.name+"__",n=0,r=e.params.length;r>n;n++)t+=e.params[n].type+"_";return t+="fn"},getParams:function(e){for(var t=[],n=0,r=e.length;r>n;n++){var o=e[n];t.push({type:o.type,name:o.id.name})}return t},findFunc:function(t){var r=n.getSignature(t);return e.hasOwnProperty(r)?e[r]:null},addFunc:function(t){var r=n.getSignature(t),o=t.id.name,a=t.type,i=n.getParams(t.params),u=t.location.start.line,c=t.doc?t.doc.body:"";e[r]={name:o,type:a,params:i,initLine:u,doc:c}}};return n}()},{}],5:[function(e,t,n){t.exports=function(){"use strict";var t=e("../../modules/DEFAULT_CONSTANTS"),n=1,r={sc0:t,sc1:{}},o=r["sc"+n],a={setInitialScope:function(e){t=e,a.reset()},getTable:function(){return r},reset:function(){n=1,r={sc0:t,sc1:{}},o=r["sc"+n]},enterScope:function(){n+=1,r["sc"+n]={},o=r["sc"+n]},exitScope:function(){n>1&&(r["sc"+n]=null),n-=1,o=r["sc"+n]},getScope:function(e){var t="udefined"!=typeof e?e:n;return r["sc"+t]},findSymbol:function(e){for(var t=n;t>=0;t--){var r=a.getScope(t);if(r.hasOwnProperty(e))return r[e]}return null},addSymbol:function(e,t){var n=t||e.init,r=e.id.name,a=n.value,i=n.type,u=e.location.start.line;o[r]={name:r,value:a,type:i,initLine:u}},checkScope:function(e){return o.hasOwnProperty(e)?o[e]:!1}};return a}()},{"../../modules/DEFAULT_CONSTANTS":6}],6:[function(e,t,n){t.exports=function(){"use strict";var e={LOW:{name:"LOW",type:"int",value:0},HIGH:{name:"HIGH",type:"int",value:1},READ:{name:"READ",type:"int",value:0},WRITE:{name:"WRITE",type:"int",value:1}};return e}()},{}]},{},[1]);
//# sourceMappingURL=maps/evaluator.js.map
