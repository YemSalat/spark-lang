!function(r){var n="SPARK_modules";r[n]||(r[n]={},r.exportModule&&r.importModule||(r.exportModule=function(t,e){if(r[n][t])throw new Error("Module "+t+" already exists");r[n][t]=e},r.importModule=function(t){return r[n][t]},r.checkModule=function(t){return r[n].hasOwnProperty(t)}))}(this),function(r){var n="IndentManager";if(!r.checkModule(n)){var t=0,e="  ",o="",u={getCurrentIndent:function(){return o},increase:function(){t+=1,o=Array(t+1).join(e)},decrease:function(){t-=1,o=Array(t+1).join(e)}};r.exportModule(n,u)}}(this),function(r){var n="GeneratorUtil";if(!r.checkModule(n)){var t={"byte":"char",ubyte:"unsigned char","int":"int",uint:"unsigned int","long":"long",ulong:"unsigned long","float":"float",str:"char","void":"void"},e={generateType:function(r){return t[r]||r}};r.exportModule(n,e)}}(this);var theGenerator=function(r){"use strict";var n=r.importModule("IndentManager"),t=r.importModule("GeneratorUtil"),e=function(r,n){var t=n||r.$$,e=o[t](r);if(e.error)throw new CompilerError("SemanticError",e.error.message,e.error.location);return e},o={DOCSTRING:function(r){return"// "+r.body.join("\n// ")+"\n"},VARIABLE_STATEMENT:function(r){for(var n=t.generateType(r.type)+" ",o=0,u=r.declarations.length;u>o;o++){var i=r.declarations[o],a="";n+=e(i.id)+a,i.init&&("str"===i.init.type&&(a="[]"),n+=" = "+e(i.init))}return n},VARIABLE_DECLARATOR:function(r){return r},FUNCTION_DECLARATION:function(r){var n="";r.doc&&(n+=e(r.doc)),n+=r.type+" "+r.id.name+" ( ";for(var t=[],o=0,u=r.params.length;u>o;o++){var i=e(r.params[o]);t.push(i)}return n+=t.join(", "),n+=" ) ",n+=e(r.body)},PARAM_DECLARATOR:function(r){var n=t.generateType(r.type)+" "+r.id.name;return n},RETURN_STATEMENT:function(r){var n="return "+e(r.argument);return n},CALL_STATEMENT:function(r){var n=r.name;return n},FOR_STATEMENT:function(r){return r},FOR_STATEMENT_DECLARATION:function(r){return r},BREAK_STATEMENT:function(r){return r},CONTINUE_STATEMENT:function(r){return r},EXPRESSION_STATEMENT:function(r){var n=e(r.expression);return n},IDENTIFIER:function(r){return r.name},LITERAL:function(r){var n=r.value;return"str"===r.type&&(n='"'+n+'"'),n},BINARY_EXPRESSION:function(r){return r.left=e(r.left),r.right=e(r.right),r.type=t.typeCheck(r.left,r.right),r.type?r:__logError(r,r.location,"type_mismatch",[r.operator,r.left.type,r.right.type])},ASSIGNMENT_STATEMENT:function(r){var n=e(r.left);return n+=" = "+e(r.right)},BLOCK_STATEMENT:function(r){var t=" {\n";return n.increase(),r.body.forEach(function(r){t+=n.getCurrentIndent()+e(r)+";\n"}),n.decrease(),t+="}\n"},PROGRAM:function(r){var t="";return r.body.forEach(function(r){t+=n.getCurrentIndent()+e(r),t.match(/\}\n$/)||(t+=";"),t+="\n"}),t},IF_STATEMENT:function(r){var n=" if ( ";return n+=e(r.test),n+=" ) ",n+=e(r.consequent),r.alternate&&(n+=" else ",n+=e(r.alternate)),n},LOGICAL_EXPRESSION:function(r){r.left=e(r.left),r.right=e(r.right);var n=r.left+" "+r.operator+" "+r.right;return n},UPDATE_EXPRESSION:function(r){return r.argument=e(r.argument),t.isNumber(r.argument.type)?(r.type=r.argument.type,r):__logError(r,r.location,"not_a_number")},UNARY_EXPRESSION:function(r){r.argument=e(r.argument);var n=t.typeCheck(r.argument);return"bool"!==n?__logError(r,r.location,"not_a_bool"):r}};return{parse:function(r){console.log("tree 2:"),console.log(r);var n=e(r);return n.trim()}}}(this);
//# sourceMappingURL=maps/generator.js.map
